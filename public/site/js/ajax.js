const cep=document.querySelector("#cep"),name=document.querySelector("#name"),ref=document.querySelector("#ref"),results=document.querySelector("#results"),table=document.querySelector("#listCart");cep.addEventListener("focusout",(async e=>{if(RegExp("\\d{8}").test(cep.value))try{let e=await axios.get("http://viacep.com.br/ws/"+cep.value+"/json/");200!=e.status||e.data.erro?(document.querySelector("#uf").value="",document.querySelector("#city").value="",document.querySelector("#district").value="",document.querySelector("#street").value="",document.querySelector("#modalTxt").textContent="O CEP inserido não é válido, por favor, tenho novamente",$("#modalLocal").modal({show:!0})):(document.querySelector("#uf").value=e.data.uf,document.querySelector("#city").value=e.data.localidade,document.querySelector("#district").value=e.data.bairro,document.querySelector("#street").value=e.data.logradouro)}catch(e){document.querySelector("#modalTxt").textContent="O CEP inserido não é válido, por favor, tenho novamente",$("#modalLocal").modal({show:!0})}else document.querySelector("#modalTxt").textContent="Uma falha interna ocorreu ao tentar buscar o CEP informado. Tente novamente mais tarde",$("#modalLocal").modal({show:!0})})),name.addEventListener("keyup",(async e=>{let t=name.value;if(t.length<=4&&(results.innerHTML=""),t.length>4)try{let e=await axios.post(searchByName,{name:t,type:"name"});results.innerHTML=e.data}catch(e){alert(e)}})),ref.addEventListener("keyup",(async e=>{let t=ref.value;if(t.length<=4&&(results.innerHTML=""),t.length>4)try{let e=await axios.post(searchByRef,{name:t,type:"cod"});results.innerHTML=e.data}catch(e){alert(e)}})),window.addEventListener("click",(async e=>{const t=e.srcElement;if("pushName"==t.name||"pushCod"==t.name)try{let e=await axios.post(addProduct,{type:t.name,id:t.id});table.innerHTML=e.data,results.innerHTML="",name.value=""}catch(e){alert(e)}})),window.addEventListener("click",(async e=>{const t=e.srcElement;if("pop"==t.name)try{let e=await axios.post(removeProduct,{id:t.id});table.innerHTML=e.data,results.innerHTML=""}catch(e){alert(e)}}));
